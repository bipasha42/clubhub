<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ClubHub Dashboard</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <style>
        body {
            background: #f4f6fb;
            font-family: 'Montserrat', Arial, sans-serif;
        }
        .navbar {
            background: #1a237e;
        }
        .navbar-brand {
            font-weight: 700;
            letter-spacing: 1px;
            color: #fff !important;
        }
        .entity-card {
            margin-bottom: 2em;
            border-radius: 18px;
            box-shadow: 0 2px 16px rgba(0,0,0,0.07);
            border: none;
        }
        .card-header {
            border-radius: 18px 18px 0 0 !important;
            font-size: 1.2em;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .bg-primary-custom { background: #1a237e !important; color: #fff !important; }
        .bg-accent { background: #00b894 !important; color: #fff !important; }
        .bg-warning-custom { background: #f9ca24 !important; color: #222 !important; }
        .bg-danger-custom { background: #e17055 !important; color: #fff !important; }
        .form-control, .form-select {
            border-radius: 8px;
        }
        .btn {
            border-radius: 8px;
            font-weight: 500;
        }
        .btn-success { background: #00b894; border: none; }
        .btn-primary { background: #1a237e; border: none; }
        .btn-warning { background: #f9ca24; border: none; color: #222; }
        .btn-danger { background: #e17055; border: none; }
        .btn i { margin-right: 4px; }
        .table {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
        }
        .table th {
            background: #f1f3f4;
            font-weight: 700;
        }
        .table td, .table th {
            vertical-align: middle;
        }
        .section-divider {
            border-top: 2px solid #e0e0e0;
            margin: 2em 0;
        }
        .footer {
            margin-top: 3em;
            padding: 1em 0;
            background: #1a237e;
            color: #fff;
            text-align: center;
            border-radius: 12px 12px 0 0;
            font-size: 1em;
            letter-spacing: 1px;
        }
        .table-hover tbody tr:hover {
            background: #f6faff;
        }
        .badge {
            font-size: 1em;
            padding: 0.5em 1em;
            border-radius: 8px;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg mb-4">
    <div class="container">
        <a class="navbar-brand" href="#"><i class="fa-solid fa-cubes"></i> ClubHub Admin</a>
    </div>
</nav>
<div class="container mb-5">
    <!-- Country CRUD Section -->
    <div class="card entity-card">
        <div class="card-header bg-accent">
            <i class="fa-solid fa-flag"></i> Country Management
        </div>
        <div class="card-body">
            <form th:action="@{/countries}" method="post" class="row g-2 mb-3 align-items-center">
                <div class="col-md-7">
                    <input type="text" name="countryName" class="form-control" placeholder="New Country Name" required>
                </div>
                <div class="col-md-3">
                    <button type="submit" class="btn btn-success"><i class="fa-solid fa-plus"></i> Add Country</button>
                </div>
            </form>
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th>Country Name</th>
                        <th style="width: 180px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="country : ${countries}">
                    <td th:text="${country.countryName}">Country Name</td>
                    <td>
                        <form th:action="@{/countries/{id}(id=${country.countryId})}" method="post" style="display:inline;">
                            <input type="hidden" name="_method" value="delete"/>
                            <button type="submit" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete</button>
                        </form>
                        <a th:href="@{/countries/edit/{id}(id=${country.countryId})}" class="btn btn-primary btn-sm"><i class="fa-solid fa-pen"></i> Edit</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="section-divider"></div>

    <!-- University CRUD Section -->
    <div class="card entity-card">
        <div class="card-header bg-warning-custom">
            <i class="fa-solid fa-building-columns"></i> University Management
        </div>
        <div class="card-body">
            <form th:action="@{/universities}" method="post" class="row g-2 mb-3 align-items-center">
                <div class="col-md-5">
                    <input type="text" name="universityName" class="form-control" placeholder="New University Name" required>
                </div>
                <div class="col-md-4">
                    <select name="countryId" class="form-select" required>
                        <option value="">Select Country</option>
                        <option th:each="country : ${countries}" th:value="${country.countryId}" th:text="${country.countryName}"></option>
                    </select>
                </div>
                <div class="col-md-3">
                    <button type="submit" class="btn btn-success"><i class="fa-solid fa-plus"></i> Add University</button>
                </div>
            </form>
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th>University Name</th>
                        <th>Country</th>
                        <th style="width: 180px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="university : ${universities}">
                    <td th:text="${university.universityName}">University Name</td>
                    <td th:text="${university.country.countryName}">Country Name</td>
                    <td>
                        <form th:action="@{/universities/{id}(id=${university.universityId})}" method="post" style="display:inline;">
                            <input type="hidden" name="_method" value="delete"/>
                            <button type="submit" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete</button>
                        </form>
                        <a th:href="@{/universities/edit/{id}(id=${university.universityId})}" class="btn btn-primary btn-sm"><i class="fa-solid fa-pen"></i> Edit</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="section-divider"></div>

    <!-- Club CRUD Section -->
    <div class="card entity-card">
        <div class="card-header bg-primary-custom">
            <i class="fa-solid fa-users"></i> Club Management
        </div>
        <div class="card-body">
            <form th:action="@{/clubs}" method="post" class="row g-2 mb-3 align-items-center">
                <div class="col-md-3">
                    <input type="text" name="name" class="form-control" placeholder="Club Name" required>
                </div>
                <div class="col-md-3">
                    <input type="text" name="description" class="form-control" placeholder="Description">
                </div>
                <div class="col-md-2">
                    <select name="category" class="form-select" required>
                        <option value="">Category</option>
                        <option value="TECHNICAL">Technical</option>
                        <option value="CULTURAL">Cultural</option>
                        <option value="ACADEMIC">Academic</option>
                        <option value="SPORTS">Sports</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select name="universityId" class="form-select" required>
                        <option value="">Select University</option>
                        <option th:each="uni : ${universities}" th:value="${uni.universityId}" th:text="${uni.universityName}"></option>
                    </select>
                </div>
                <div class="col-md-2">
                    <input type="email" name="contactEmail" class="form-control" placeholder="Contact Email">
                </div>
                <div class="col-md-12 mt-2">
                    <button type="submit" class="btn btn-success"><i class="fa-solid fa-plus"></i> Add Club</button>
                </div>
            </form>
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th>Club Name</th>
                        <th>Category</th>
                        <th>University</th>
                        <th>Contact Email</th>
                        <th>Approved</th>
                        <th style="width: 220px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="club : ${clubs}">
                    <td th:text="${club.name}">Club Name</td>
                    <td th:text="${club.category}">Category</td>
                    <td th:text="${club.university.universityName}">University</td>
                    <td th:text="${club.contactEmail}">Email</td>
                    <td>
                        <span th:if="${club.isApproved}" class="badge bg-accent">Yes</span>
                        <span th:if="${!club.isApproved}" class="badge bg-danger-custom">No</span>
                    </td>
                    <td>
                        <form th:action="@{/clubs/{id}(id=${club.id})}" method="post" style="display:inline;">
                            <input type="hidden" name="_method" value="delete"/>
                            <button type="submit" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete</button>
                        </form>
                        <a th:href="@{/clubs/edit/{id}(id=${club.id})}" class="btn btn-primary btn-sm"><i class="fa-solid fa-pen"></i> Edit</a>
                        <form th:action="@{/clubs/{id}/approval(id=${club.id})}" method="post" style="display:inline;">
                            <input type="hidden" name="approved" th:value="${!club.isApproved}" />
                            <button type="submit" class="btn btn-warning btn-sm" th:text="${club.isApproved ? 'Reject' : 'Approve'}"></button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="section-divider"></div>

    <!-- Club Search Section -->
    <div class="card entity-card">
        <div class="card-header bg-accent">
            <i class="fa-solid fa-magnifying-glass"></i> Club Search
        </div>
        <div class="card-body">
            <form th:action="@{/dashboard}" method="get" class="row g-2 mb-3 align-items-center">
                <div class="col-md-3">
                    <input type="text" name="name" class="form-control" placeholder="Club Name" th:value="${param.name}">
                </div>
                <div class="col-md-2">
                    <select name="category" class="form-select">
                        <option value="">All Categories</option>
                        <option value="TECHNICAL">Technical</option>
                        <option value="CULTURAL">Cultural</option>
                        <option value="ACADEMIC">Academic</option>
                        <option value="SPORTS">Sports</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select name="universityId" class="form-select">
                        <option value="">All Universities</option>
                        <option th:each="uni : ${universities}" th:value="${uni.universityId}" th:text="${uni.universityName}"></option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select name="isApproved" class="form-select">
                        <option value="">All</option>
                        <option value="true">Approved</option>
                        <option value="false">Not Approved</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <input type="text" name="countryName" class="form-control" placeholder="Country Name" th:value="${param.countryName}">
                </div>
                <div class="col-md-1">
                    <button type="submit" class="btn btn-primary w-100"><i class="fa-solid fa-search"></i> Search</button>
                </div>
            </form>
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th>Club Name</th>
                        <th>Category</th>
                        <th>University</th>
                        <th>Country</th>
                        <th>Approved</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="club : ${searchResults}">
                    <td th:text="${club.name}">Club Name</td>
                    <td th:text="${club.category}">Category</td>
                    <td th:text="${club.university.universityName}">University</td>
                    <td th:text="${club.university.country.countryName}">Country</td>
                    <td>
                        <span th:if="${club.isApproved}" class="badge bg-accent">Yes</span>
                        <span th:if="${!club.isApproved}" class="badge bg-danger-custom">No</span>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(searchResults)}">
                    <td colspan="5" class="text-center">No clubs found.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<footer class="footer">
    &copy; 2025 ClubHub. All rights reserved.
</footer>
</body>
</html>