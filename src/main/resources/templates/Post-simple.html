<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${post.title}">Post</title>
</head>
<body>
    <h2 th:text="${post.title}">Post Title</h2>
    <p th:text="${post.content}">Post content here...</p>

    <!-- Like Section -->
    <form th:action="@{/posts/{postId}/like-form(postId=${post.postId})}" method="post" style="display:inline;">
        <input type="hidden" name="userId" th:value="${currentUser.userId}" />
        <button type="submit" th:text="${likedByCurrentUser} ? 'Unlike' : 'Like'"></button>
    </form>
    <span th:text="'Likes: ' + ${likeCount}">Likes: 0</span>

    <!-- Comments Section -->
    <h3>Comments (<span th:text="${#lists.size(comments)}">0</span>)</h3>
    <ul>
        <li th:each="comment : ${comments}">
            <b th:text="${comment.user.userName}">User</b>:
            <span th:text="${comment.content}">Comment text</span>
            <span th:if="${comment.user.userId == currentUser.userId}">
                <!-- Edit form -->
                <form th:action="@{/posts/comments-form/{commentId}(commentId=${comment.commentId})}" method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="put"/>
                    <input type="hidden" name="userId" th:value="${currentUser.userId}" />
                    <input type="text" name="content" th:value="${comment.content}" size="15"/>
                    <button type="submit">Edit</button>
                </form>
                <!-- Delete form -->
                <form th:action="@{/posts/comments-form/{commentId}(commentId=${comment.commentId})}" method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="delete"/>
                    <input type="hidden" name="userId" th:value="${currentUser.userId}" />
                    <button type="submit">Delete</button>
                </form>
            </span>
        </li>
    </ul>

    <!-- Add Comment Form -->
    <form th:action="@{/posts/{postId}/comments-form(postId=${post.postId})}" method="post">
        <input type="hidden" name="userId" th:value="${currentUser.userId}" />
        <input type="text" name="content" placeholder="Add a comment..." required size="30"/>
        <button type="submit">Post</button>
    </form>
</body>
</html>